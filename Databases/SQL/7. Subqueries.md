## Subqueries

### 1978. Employees Whose Manager Left the Company

- Self Join
- Use `NOT IN` to compare manager_id to employee_id.
  ```sql
		SELECT e.employee_id
		FROM Employees e
		WHERE e.salary < 30000
		AND e.manager_id NOT IN (
		SELECT m.employee_id
		FROM Employees m)
		GROUP BY e.employee_id
		ORDER BY e.employee_id
	```

### 626. Exchange Seats

- Use window `ROW_NUMBER` & `OVER` to generate row numbers
- Use `ORDER BY` to swap seats of each row with `IF`.
- Use `MOD` to swap on id.
	- Swap evens & odds.
  ```sql
		SELECT ROW_NUMBER() OVER() id, student
		FROM seat
		ORDER BY IF(MOD(id, 2) = 0, id-1, id+1)
	```

### 1341. Movie Rating

- `UNION` two `SELECT`.
- Use `()` around the each `SELECT`.
- 

  ```sql
		(select name as results
		from users
		join movierating
		on users.user_id = movierating.user_id
		group by name
		having count(movierating.user_id)
		order by count(*) desc, name
		limit 1)
		
		union all
		
		(select title as results from movierating
		join movies using(movie_id)
		WHERE EXTRACT(YEAR_MONTH FROM created_at) = 202002
		group by title
		order by avg(rating) desc, title
		limit 1)
	```

### 1321. Restaurant Growth

- f

  ```sql

	```

### 602. Friend Requests II: Who Has The Most Friends Requests

- f

  ```sql

	```

### 585. Investments in 2016

- f

  ```sql

	```

### 185. Department Top Three Salaries

- f

  ```sql

	```
